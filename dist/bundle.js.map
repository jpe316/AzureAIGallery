{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/widget.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","appendToWidget","parentSelector","tag","classes","html","parentNode","document","querySelector","childNode","createElement","innerHTML","className","appendChild","getJSON","url","callback","request","XMLHttpRequest","open","onload","status","data","JSON","parse","responseText","items","send","restart","getElementById","start","querySelectorAll","setAttribute","keyword","widgetId","response","repos","length","language","repoUrl","stars","updateRepoDetails","sort","a","b","stargazers_count","slice","result","repo","push","html_url","topRepos","lastDay","updateLastPush","latestDate","now","Date","difference","pushedDate","pushed_at","Math","floor","lastPushedDay","fetchRepos","fn","addEventListener","readyState","ready"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","function appendToWidget(parentSelector, tag, classes, html) {\n    var parentNode = document.querySelector(parentSelector);\n    var childNode = document.createElement(tag);\n    childNode.innerHTML = html;\n    childNode.className += classes;\n    parentNode.appendChild(childNode);\n}\n\n\nfunction getJSON(url, callback) {\n    var request = new XMLHttpRequest();\n    request.open('GET', url, true);\n    request.onload = function() {\n        if (request.status === 200) {\n            var data = JSON.parse(request.responseText);\n            callback(data.items);\n        }\n    };\n    request.send();\n}\n\n\nfunction ready(fn) {\n    document.getElementById('btnSearch').addEventListener(\"click\", restart);\n\n    if (document.readyState != 'loading') {\n        fn();\n    } else {\n        document.addEventListener('DOMContentLoaded', fn);\n    }\n}\n\nfunction restart() {\n    document.getElementById('result_widget').innerHTML = '';\n    start();\n}\n\nfunction start() {\n    appendToWidget(\"body\", \"style\", \"\", \"@import url(https://fonts.googleapis.com/css?family=Noto+Sans:400,700);.gh-widget-link,.gh-widget-link:hover{text-decoration:none}.gh-widget-container{display:flex;flex-direction:row;flex-wrap:no-wrap;align-items:center;justify-content:center;color:#333;font-family:'Noto Sans',sans-serif}.gh-widget-personal-details .bio,.gh-widget-stats .count{color:#4078C0}.github-widget{border:1px solid #DDD;max-width:350px}.gh-widget-item{flex:1;text-align:center;padding:10px}.gh-widget-repositories .language{text-align:left}.gh-widget-repositories .language div,.gh-widget-repositories .stars div{padding:5px 0}.gh-widget-photo{flex:2}.gh-widget-photo img{border-radius:100%;max-width:90px}.gh-widget-personal-details{flex:6}.gh-widget-personal-details .full-name{font-size:1.5em;line-height:1.5em}.gh-widget-personal-details .location{font-size:.8em}.gh-widget-stats .count{font-size:1.2em;font-weight:700}.gh-widget-repositories .names{flex:2;text-align:left}.gh-widget-repositories .names div{padding:5px 0;text-overflow:ellipsis}.gh-widget-follow{flex:2}.gh-widget-active-time{flex:4;font-size:.8em}.gh-widget-heading{font-weight:400;color:#666}.gh-widget-hr{border:1px solid #DDD}.gh-widget-link{color:#4078C0}.gh-widget-follow button{width:100%;height:2em;border:none;background:#ddd}\");\n\n    var result_widget = document.querySelectorAll('.github-widget')[0];\n    \n    var parentNode = result_widget;\n    parentNode.setAttribute(\"id\", \"result_widget\");\n    appendToWidget(\"#result_widget\", \"div\", \"\", '<div class=\"gh-widget-container\"><div class=\"gh-widget-item gh-widget-photo\"></div><div class=\"gh-widget-item gh-widget-personal-details\"></div></div><div class=\"gh-widget-container gh-widget-stats\"></div><hr class=\"gh-widget-hr\"><div class=\"gh-widget-container\"><div class=\"gh-widget-item gh-widget-heading\">Top repositories</div></div><div class=\"gh-widget-repositories\"></div><div class=\"gh-widget-container\"><div class=\"gh-widget-item gh-widget-follow\"></div><div class=\"gh-widget-item gh-widget-active-time\"></div></div>')\n\n    // var inputField = document.getElementById('keyword');\n    // var username = parentNode.dataset.username;\n    var keyword = document.getElementById('keyword').value;\n\n    fetchRepos(keyword, \"#result_widget\");\n    // fetchUserDetails(username, \"#result_widget\");\n    \n}\n\n\nready(start);\n\n\nfunction fetchRepos(keyword, widgetId) {\n    var url = \"https://api.github.com/search/repositories?q=topic:\" + keyword + \"&sort=stars&per_page=1000\";\n    getJSON(url, function(response) {\n        updateRepoDetails(topRepos(response), widgetId);\n        updateLastPush(lastPushedDay(response), widgetId);\n    });\n}\n\n\nfunction fetchUserDetails(username, widgetId) {\n    var url = \"https://api.github.com/users/\" + username;\n    getJSON(url, function(response) {\n        updateUserDetails(response, widgetId);\n    });\n}\n\n\nfunction updateLastPush(lastDay, widgetId) {\n    appendToWidget(widgetId + \" .gh-widget-active-time\", \"span\", \"\", 'Last active: ' + (lastDay ? lastDay + ' day(s) ago' : 'Today'));\n}\n\n\nfunction lastPushedDay(repos) {\n    var now = new Date();\n    var latestDate;\n    var difference = 9999999999999;\n    for (var i = 0; i < repos.length; i++) {\n        var pushedDate = new Date(repos[i].pushed_at)\n        if (now - pushedDate < difference) {\n            latestDate = pushedDate;\n            difference = now - pushedDate;\n        }\n    }\n    return Math.floor((now - latestDate) / (1000 * 3600 * 24));\n}\n\n\nfunction updateUserDetails(user, widgetId) {\n\n    appendToWidget(widgetId + \" .gh-widget-personal-details\", \"div\", \"full-name\", user.name);\n    if (user.bio) {\n        appendToWidget(widgetId + \" .gh-widget-personal-details\", \"div\", \"bio\", user.bio);\n    }\n    if (user.location) {\n        appendToWidget(widgetId + \" .gh-widget-personal-details\", \"div\", \"location\", '&#9906; ' + user.location);\n    }\n    appendToWidget(widgetId + \" .gh-widget-stats\", \"div\", \"gh-widget-item\", '<div class=\"count\">' + user.followers + '</div><div class=\"stat-name\">Followers</div>');\n    appendToWidget(widgetId + \" .gh-widget-stats\", \"div\", \"gh-widget-item\", '<div class=\"count\">' + user.following + '</div><div class=\"stat-name\">Following</div>');\n    appendToWidget(widgetId + \" .gh-widget-stats\", \"div\", \"gh-widget-item\", '<div class=\"count\">' + user.public_repos + '</div><div class=\"stat-name\">Repositories</div>');\n    appendToWidget(widgetId + \" .gh-widget-photo\", \"span\", \"\", '<img src=\"' + user.avatar_url + '\">');\n    appendToWidget(widgetId + \" .gh-widget-follow\", \"button\", \"\", '<a class=\"gh-widget-link\" target=\"new\" href=\"' + user.html_url + '\">Follow</a>')\n\n}\n\nfunction updateRepoDetails(repos, widgetId) {\n\n    for (var i = 0; i < repos.length; i++) {\n        var language = repos[i].language ? repos[i].language : \"Unknown\";\n        appendToWidget(widgetId + \" .gh-widget-repositories\", \"div\", \"gh-widget-container\", '<div class=\"gh-widget-item names\"><div><a class=\"gh-widget-link\" href=\"' + repos[i].repoUrl + '\">' + repos[i].name + '</a></div></div><div class=\"gh-widget-item language\"><div>' + language + '</div></div><div class=\"gh-widget-item stars\"><div>&#9733;' + repos[i].stars + '</div></div>');\n    }\n\n}\n\nfunction topRepos(repos) {\n\n    repos.sort(function(a, b) {\n        if (a.stargazers_count === b.stargazers_count) {\n            return 0;\n        } else if (a.stargazers_count > b.stargazers_count) {\n            return -1;\n        } else {\n            return 1;\n        }\n    })\n\n    repos = repos.slice(0, 10);\n    var result = [];\n    for (var i in repos) {\n        var repo = repos[i];\n        result.push({\n            name: repo.name,\n            stars: repo.stargazers_count,\n            language: repo.language,\n            repoUrl: repo.html_url\n\n        });\n    }\n    return result;\n}\n"],"sourceRoot":""}